<form [formGroup]="personelForm" *ngIf="initAcls" (ngSubmit)="onSubmit()"  method="post">
  
  <span class="ns">Search for NIST staff member:</span> <br>
  <mat-form-field  appearance="fill" style="width:300px;">
    <!-- <mat-label>NIST Contributor</mat-label> -->
    <input type="text"
          placeholder="Type to search ..."
          aria-label="Nist Contributor"
          style="background-color: rgb(252, 252, 252);"
          matInput
          formControlName="dmp_contributor"
          [matAutocomplete]="dmp_contributor">
    <mat-autocomplete 
      #dmp_contributor="matAutocomplete"
      [displayWith]="displaySelectedSDSuggestion"
    >
      <mat-option *ngFor="let contrib of fltr_NIST_Contributor | async" [value]="contrib">
        {{contrib.display}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <br>
  <button type="button" class="button-add-row" mat-button (click)="addUser()" [disabled]="disableAdd">Add</button>

  <table mat-table [dataSource]="aclsProperties" class="mat-elevation-z8 contribTbl">
      <!-- 
        iterate over columns 
      -->
      <ng-container [matColumnDef]="col.key" *ngFor="let col of contrib_colSchema">
        <!-- 
          table headers 
        -->
        <th mat-header-cell *matHeaderCellDef>  {{ col.label }} </th>
        <!-- 
          table cells 
        -->
        <td mat-cell *matCellDef="let element">  
          <!-- table cell display -->
          <div [ngSwitch]="col.type" *ngIf="!element.isEdit">
            <!-- Switch if the column isSelected to display the checkbox in the table cell -->
            <ng-container *ngSwitchCase="'isSelected'" >
              <mat-checkbox class="dmp_chk_bx"
              (click)="updateAclsProperties(element.userID, element.isSelected, col.key)" (change)="element.isSelected = $event.checked" *ngIf="element[col.key]" checked 
              ></mat-checkbox>

              <mat-checkbox class="dmp_chk_bx"
              (click)="updateAclsProperties(element.userID, element.isSelected, col.key)" (change)="element.isSelected = $event.checked" *ngIf="!element[col.key]" 
              ></mat-checkbox>

            </ng-container>

            <!-- Switch if the column isEdit to display the Edit and delete buttons in the table cell -->
            <div class="btn-edit" *ngSwitchCase="'isEdit'" style="width: 65px;">
              <button
                type="button"
                mat-button
                class="button-remove"
                (click)="removeRow(element)"
              >
                Remove
              </button>
            </div>
            
            <!-- default cell -->
            <span *ngSwitchDefault>
              {{ element[col.key] }}
            </span>
          </div>  
          
  
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="contrib_dispCols"></tr>
      <tr mat-row *matRowDef="let row; columns: contrib_dispCols;"></tr>
  </table>
  <button mat-button type="button" class="btn_draft" (click)="saveAcls()">
    Save Changes
  </button>
  <!-- Reset to original settings -->
  <button mat-button type="button" class="btn_draft" >
    Reset
  </button>
  <!-- exit without saving -->
  <button mat-button type="button" class="btn_draft" >
    Cancel
  </button>
  <!-- <pre>{{ currAcls | json }}</pre> -->

</form>